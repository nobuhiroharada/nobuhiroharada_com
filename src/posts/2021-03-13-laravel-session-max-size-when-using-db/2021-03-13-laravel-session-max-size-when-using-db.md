---
title: "[Laravel]セッション(SESSION_DRIVERをdatabaseに設定している場合)の最大容量について"
date: "2021-03-13"
archive: "2020/03"
tags:
  - Laravel
---

SESSION_DRIVER を database にしていて、セッションにデータを格納し続けるとある時点でセッションに格納していたデータが消えてしまうことがあり、セッションの最大容量について調べました。

結論から言いますと、sessions テーブルの payload カラムが text 型なので、text 型の最大文字数の 65,535 文字を超えると保存に失敗することが原因でした。

payload カラムに保存する際、セッションデータを base64_encode するので、payload カラムの text 型の容量がセッションデータの最大容量になっていました。

何もエラーを吐かず、突然セッションデータが消えるので、びっくりしましたが、text 型の容量を超えるデータをセッションで持つな、ということなんでしょうかね。

以上になります。
